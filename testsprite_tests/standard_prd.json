{
  "meta": {
    "project": "BroLab Entertainment - Music Beats Store",
    "date": "2025-10-20",
    "prepared_by": "Development Team"
  },
  "product_overview": "BroLab Entertainment is a modern music beats marketplace platform providing users a seamless experience to browse, preview, and purchase music beats. The platform integrates WooCommerce for product catalog management, Clerk for secure user authentication, and Convex as a real-time database solution, delivering a dynamic and interactive user interface with real-time synchronization. It supports multi-tier subscription plans, comprehensive order and download management, and offers professional audio services like mixing, mastering, and recording session bookings.",
  "core_goals": [
    "Provide an intuitive and responsive user interface for music beat discovery and purchase.",
    "Enable secure and seamless user authentication and subscription management via Clerk.",
    "Offer a powerful real-time audio player with waveform visualization for beat previews.",
    "Support a robust product catalog with filtering, search, and licensing options integrated from WooCommerce.",
    "Implement a reliable and persistent shopping cart with multi-gateway payment processing (Stripe and PayPal).",
    "Deliver real-time dashboard analytics, order tracking, and user download quota management.",
    "Facilitate booking of audio production services such as mixing, mastering, recording, and consultations.",
    "Ensure high performance, accessibility compliance (WCAG 2.1 AA), and cross-browser compatibility.",
    "Maintain strong security practices for authentication, payment, and data handling.",
    "Provide enhanced real-time features including EventBus messaging, WebSocket connection management, and offline support."
  ],
  "key_features": [
    "Clerk-based authentication system with session handling and protected routes.",
    "Integration with WooCommerce and WordPress for product catalog with filtering, search, and licensing.",
    "WaveSurfer.js-powered audio players with real-time waveform visualization and playback controls.",
    "Persistent shopping cart synchronized via Convex with localStorage support.",
    "Multi-gateway payment processing supporting Stripe and PayPal with complete order lifecycle.",
    "Comprehensive order and subscription management including download quotas and billing.",
    "Reservation system for audio services bookings with calendar workflow.",
    "Real-time user dashboard displaying analytics, orders, downloads, and favorite beats.",
    "EventBus and ConnectionManager for real-time event handling and network strategy management.",
    "Responsive design with mobile-first approach using Tailwind CSS, shadcn/ui, and Radix UI."
  ],
  "user_flow_summary": [
    "Users can browse the product catalog, apply filters by genre, BPM, and price, preview beats with waveform audio players, and add products to their persistent shopping cart.",
    "New users can register and authenticate using Clerk's social login and session management, with access to protected routes for dashboard and purchases.",
    "Users select license tiers for beats and complete payments through Stripe or PayPal gateways with secure checkout flows.",
    "Authenticated users access a real-time dashboard to view orders, downloads, subscription plans, and analytics, with options to manage profile and billing.",
    "Users book professional audio services (mixing, mastering, recording, consultations) via an integrated reservation system with real-time availability.",
    "The audio player maintains playback state globally across navigation, allowing seamless beat preview and control.",
    "Real-time synchronization keeps the dashboard, cart, and relevant UI components updated through EventBus and WebSocket/Polling fallback strategies.",
    "Subscription and download quotas are enforced dynamically, with billing handled via Clerk Billing integration."
  ],
  "validation_criteria": [
    "Product catalog displays correct beats with filtering and search functioning accurately.",
    "Audio player renders waveforms smoothly and supports all playback controls on all devices.",
    "Shopping cart persists across sessions and synchronizes correctly between local storage and Convex database.",
    "User authentication flows enable secure login, signup, password reset, and email verification without errors.",
    "Payment processing completes successfully via Stripe and PayPal with accurate order status updates.",
    "Orders and downloads are tracked comprehensively with accurate quota enforcement and invoice generation.",
    "Reservation bookings process correctly with real-time synchronization and conflict detection.",
    "Dashboard analytics and user data update in real-time with minimal latency.",
    "Responsive UI components maintain usability and accessibility standards across all supported devices and browsers.",
    "EventBus and ConnectionManager implement robust error handling, fallback, and reconnection logic to ensure continuous real-time operation.",
    "Unit and integration tests cover all critical components achieving 80%+ coverage with successful runs in CI/CD pipelines.",
    "Performance metrics meet defined targets with First Contentful Paint under 2 seconds and Lighthouse scores above 90.",
    "Accessibility audits confirm WCAG 2.1 AA compliance including keyboard navigation and screen reader compatibility.",
    "Security audits confirm prevention of common vulnerabilities like XSS, CSRF, and secure session management."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React 18",
      "Node.js 20+",
      "Express",
      "Vite 5.4+",
      "Convex (Real-time Database)",
      "Clerk (Authentication)",
      "Stripe (Payment Processing)",
      "PayPal (Payment Processing)",
      "WooCommerce/WordPress (Product Catalog)",
      "Zustand (State Management)",
      "TanStack Query (Server State)",
      "Wouter (Routing)",
      "Tailwind CSS",
      "shadcn/ui",
      "Radix UI",
      "WaveSurfer.js (Audio Visualization)",
      "Zod (Validation)",
      "Jest (Testing)",
      "React Testing Library"
    ],
    "features": [
      {
        "name": "Authentication System",
        "description": "Clerk-based authentication with user management, session handling, and protected routes",
        "files": [
          "server/routes/clerk.ts",
          "server/auth.ts",
          "client/src/components/auth/ClerkSyncProvider.tsx"
        ]
      },
      {
        "name": "Product Catalog",
        "description": "WooCommerce integration for beats catalog with filtering and search",
        "files": [
          "server/routes/woo.ts",
          "client/src/components/beats/beat-card.tsx",
          "convex/products.ts"
        ]
      },
      {
        "name": "Audio Player",
        "description": "WaveSurfer.js-based audio player with waveform visualization",
        "files": [
          "client/src/components/audio/GlobalAudioPlayer.tsx",
          "client/src/components/audio/WaveformPlayer.tsx"
        ]
      },
      {
        "name": "Shopping Cart",
        "description": "Persistent shopping cart with localStorage and Convex sync",
        "files": [
          "client/src/components/cart/AddToCartButton.tsx",
          "convex/cartItems.ts"
        ]
      },
      {
        "name": "Payment Processing",
        "description": "Multi-gateway payment system with Stripe and PayPal",
        "files": [
          "server/routes/stripe.ts",
          "server/routes/paypal.ts",
          "convex/orders.ts"
        ]
      },
      {
        "name": "Order Management",
        "description": "Complete order lifecycle with status tracking and invoices",
        "files": [
          "server/routes/orders.ts",
          "client/src/components/orders/OrderCard.tsx",
          "convex/orders.ts"
        ]
      },
      {
        "name": "Reservation System",
        "description": "Service booking for mixing, mastering, recording, and consultations",
        "files": [
          "server/routes/reservations.ts",
          "convex/reservations.ts"
        ]
      },
      {
        "name": "Download Management",
        "description": "Secure file downloads with quota tracking and license validation",
        "files": [
          "server/routes/downloads.ts",
          "convex/downloads.ts",
          "convex/quotas.ts"
        ]
      },
      {
        "name": "Subscription Management",
        "description": "Clerk Billing integration with download quotas and feature access",
        "files": [
          "convex/subscriptions.ts",
          "convex/quotas.ts",
          "convex/invoices.ts"
        ]
      },
      {
        "name": "User Dashboard",
        "description": "Real-time dashboard with analytics, orders, downloads, and favorites",
        "files": [
          "client/src/components/dashboard/ModernDashboard.tsx",
          "convex/dashboard.ts"
        ]
      }
    ]
  }
}
